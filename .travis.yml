language: c
os: linux
dist: bionic
# before_install: 
#   - sudo apt-get install linux-headers-`uname -r`

env:
  global:
   # The next declaration is the encrypted COVERITY_SCAN_TOKEN, created
   #   via the "travis encrypt" command using the project repo's public key
   - secure: "M9TJO26zhSncF2ACtkaxXCdJAtam6we56bKpZoNvFGcEZHhzZHXawyZ2YhCTgMjBEp/6XBG9p+U2P20G4+ENMuwNev/Q7NnKpfyokbhYUN5fRBVEPbLC4spcnOu4M8ZARceFoWjQ4FZNEGerMDTl5V+BmzGjcKa0k0oF4mru6GKvvFXT/ol3rxTbEeaNSzbrP3HlQomvJ8goyjAQEbsXmBy0cOUUaV3iODGlL/Md6XtirqTsl5WrsXAZdXfnd3igEHr1/C3IWwY2mqfKSHRkW5VpQc2pe7mHja12N3h2a7bwlXX/1gsLpnc/wp+TddDdIokzvfSgT0Zi9OiDOaE2eOto5GBuiRBLCFp+ewDD6++GX35ZhneceSoMSnZcupp3b465P5ZcwoP3kN8KTB5ibBDmbwQDehBvCqKn2C0dvzfE0e9kl1C905Nqx3hXvFdDSyDfM5Ao6yYbh55P+pJ22zB1dvEBHAuqzLEcwLlLqGPnMlB6JT9qR7h6G5sG9lz/QjakLKmy6k/2QcaGfnXWyRJy4GXjDvUtQgpTbDIz/dBZxCQ/GdNi3MTqt0NG6/4X2RNlaStFYZAiQZY+jJ3xJ0HIbE2evBwwcVppcniKHU3p8uExJt7vKiSpa0jIouOiTwpcCzfP/3qO6afEuP/R+EgGzpxuKISIBovQkydjzVk="

before_install:
  - sudo apt-get install linux-headers-`uname -r`
  - echo -n | openssl s_client -connect https://scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-

addons:
  coverity_scan:
    project:
      name: "Shymaxtic/CANUSBDriver"
      description: "USB CAN Linux driver"
    notification_email: shymaxtic@gmail.com
    build_command_prepend: ""
    build_command: "make"
    branch_pattern: master
    
script: make
